<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ page.description | default: site.description }}">
    <meta name="keywords" content="electron microscopy, computational microscopy, Northwestern University, materials science, machine learning">
    <meta name="author" content="{{ site.course.instructor }}">
    
    <!-- Open Graph -->
    <meta property="og:title" content="{{ page.title | default: site.title }}">
    <meta property="og:description" content="{{ page.description | default: site.description }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ page.url | absolute_url }}">
    <meta property="og:site_name" content="{{ site.title }}">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="{{ page.title | default: site.title }}">
    <meta name="twitter:description" content="{{ page.description | default: site.description }}">
    
    <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
    
    <!-- Preload critical fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- CSS -->
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%234e2a84'/><text x='50' y='65' text-anchor='middle' font-family='serif' font-size='60' fill='white'>Œµ</text></svg>">
    
    <!-- JSON-LD structured data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Course",
        "name": "{{ site.course.title }}",
        "description": "{{ site.description }}",
        "provider": {
            "@type": "Organization",
            "name": "{{ site.course.university }}",
            "url": "{{ site.url }}"
        },
        "instructor": {
            "@type": "Person",
            "name": "{{ site.course.instructor }}",
            "email": "{{ site.course.email }}"
        },
        "courseCode": "{{ site.course.number }}",
        "educationalCredentialAwarded": "{{ site.course.credits }} Credits"
    }
    </script>
</head>
<body>
    <!-- Skip to main content -->
    <a href="#main-content" class="sr-only">Skip to main content</a>
    
    <!-- Header -->
    <header class="site-header" role="banner">
        <div class="header-content">
            <h1 class="site-title">{{ site.title }}</h1>
            <p class="site-description">{{ site.description }}</p>
            <div class="course-info">
                <span class="course-semester">{{ site.course.semester }}</span>
                <span class="course-separator">‚Ä¢</span>
                <span class="course-credits">{{ site.course.credits }} Credits</span>
                <span class="course-separator">‚Ä¢</span>
                <span class="course-instructor">{{ site.course.instructor }}</span>
            </div>
        </div>
    </header>
    
    <!-- Navigation -->
    <nav class="site-nav" role="navigation" aria-label="Main navigation">
        <div class="nav-container">
            <a href="{{ '/' | relative_url }}" class="nav-link {% if page.url == '/' %}active{% endif %}" aria-current="{% if page.url == '/' %}page{% endif %}">
                <span class="nav-icon">üè†</span>
                Home
            </a>
            <a href="{{ '/schedule' | relative_url }}" class="nav-link {% if page.url contains 'schedule' %}active{% endif %}" aria-current="{% if page.url contains 'schedule' %}page{% endif %}">
                <span class="nav-icon">üìÖ</span>
                Schedule
            </a>
            <a href="{{ '/assignments' | relative_url }}" class="nav-link {% if page.url contains 'assignments' %}active{% endif %}" aria-current="{% if page.url contains 'assignments' %}page{% endif %}">
                <span class="nav-icon">üìù</span>
                Assignments
            </a>
            <a href="{{ '/resources' | relative_url }}" class="nav-link {% if page.url contains 'resources' %}active{% endif %}" aria-current="{% if page.url contains 'resources' %}page{% endif %}">
                <span class="nav-icon">üìö</span>
                Resources
            </a>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main id="main-content" class="page-content" role="main">
        {% if page.hero %}
        <section class="hero">
            <div class="hero-content">
                <h1>{{ page.hero.title | default: page.title }}</h1>
                <p>{{ page.hero.description | default: page.description }}</p>
                {% if page.hero.buttons %}
                <div class="hero-buttons">
                    {% for button in page.hero.buttons %}
                    <a href="{{ button.url }}" class="btn {{ button.class | default: 'btn-primary' }}">
                        {{ button.text }}
                    </a>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </section>
        {% endif %}
        
        {% if page.breadcrumb %}
        <nav aria-label="Breadcrumb" class="breadcrumb">
            <ol>
                <li><a href="{{ '/' | relative_url }}">Home</a></li>
                {% for crumb in page.breadcrumb %}
                <li><a href="{{ crumb.url }}">{{ crumb.title }}</a></li>
                {% endfor %}
                <li aria-current="page">{{ page.title }}</li>
            </ol>
        </nav>
        {% endif %}
        
        <article class="content fade-in-up">
            {% if page.title and page.layout != 'home' %}
            <header class="page-header">
                <h1>{{ page.title }}</h1>
                {% if page.description %}
                <p class="page-description">{{ page.description }}</p>
                {% endif %}
                {% if page.date %}
                <p class="page-meta">
                    <time datetime="{{ page.date | date: '%Y-%m-%d' }}">
                        {{ page.date | date: '%B %d, %Y' }}
                    </time>
                </p>
                {% endif %}
            </header>
            {% endif %}
            
            {{ content }}
        </article>
    </main>
    
    <!-- Footer -->
    <footer class="site-footer" role="contentinfo">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Course Information</h3>
                <p>{{ site.course.number }}: {{ site.course.title }}</p>
                <p>{{ site.course.semester }}</p>
                <p>{{ site.course.university }}</p>
            </div>
            
            <div class="footer-section">
                <h3>Instructor</h3>
                <p>{{ site.course.instructor }}</p>
                <p><a href="mailto:{{ site.course.email }}">{{ site.course.email }}</a></p>
                <p>Office: {{ site.course.office }}</p>
                <p>Hours: {{ site.course.office_hours }}</p>
            </div>
            
            <div class="footer-section">
                <h3>Resources</h3>
                <p><a href="{{ site.repository }}" target="_blank" rel="noopener">GitHub Repository</a></p>
                <p><a href="{{ '/resources' | relative_url }}">Course Resources</a></p>
                <p><a href="https://northwestern.edu" target="_blank" rel="noopener">Northwestern University</a></p>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; {{ 'now' | date: '%Y' }} {{ site.course.university }}. All rights reserved.</p>
            <p>Built with Jekyll and hosted on GitHub Pages.</p>
        </div>
    </footer>
    
    <!-- JavaScript for enhanced interactions -->
    <script>
        // Progressive enhancement
        document.addEventListener('DOMContentLoaded', function() {
            // Add loading animation to cards
            const cards = document.querySelectorAll('.card, .week-card, .assignment-card');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in-up');
                    }
                });
            });
            
            cards.forEach(card => observer.observe(card));
            
            // Add smooth scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                });
            });
            
            // Add copy button to code blocks
            document.querySelectorAll('pre code').forEach(block => {
                const button = document.createElement('button');
                button.className = 'copy-button';
                button.textContent = 'Copy';
                button.addEventListener('click', () => {
                    navigator.clipboard.writeText(block.textContent);
                    button.textContent = 'Copied!';
                    setTimeout(() => button.textContent = 'Copy', 2000);
                });
                block.parentElement.appendChild(button);
            });
        });
    </script>
</body>
</html>